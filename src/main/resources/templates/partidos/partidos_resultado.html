<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registrar Resultado</title>
    <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
    <h1>Acta del Partido</h1>
    
    <div th:if="${mensaje}" th:text="${mensaje}" style="color: green; font-weight: bold; margin-bottom: 15px;"></div>
    <div th:if="${error}" th:text="${error}" style="color: red; font-weight: bold; margin-bottom: 15px;"></div>

    <h2 th:text="${partido.equipoLocal.nombre + ' vs ' + partido.equipoVisitante.nombre}"></h2>

    <form action="/partidos/registrar-resultado" method="post">
        <input type="hidden" name="idPartido" th:value="${partido.id}">
        
        <div style="display:flex; justify-content: space-around;">
            
            <div style="width: 45%; background: #f9f9f9; padding: 15px; border-radius: 5px;">
                <h3 th:text="${partido.equipoLocal.nombre} + ' (Local)'"></h3>
                <p>Indica los goles de cada jugador:</p>
                
                <div th:each="j : ${partido.equipoLocal.jugadores}" style="margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 5px;">
                    <label th:text="${j.nombre} + ' (' + ${j.posicion} + ')'" 
                           th:style="${j.posicion == 'Portero' ? 'color:gray; font-style:italic;' : 'font-weight:bold;'}">
                    </label>
                    <br>
                    Goles: <input type="number" 
                                  th:name="'golesLocal[' + ${j.dni} + ']'" 
                                  min="0" value="0" 
                                  style="width: 60px;">
                </div>
            </div>

            <div style="width: 45%; background: #f9f9f9; padding: 15px; border-radius: 5px;">
                <h3 th:text="${partido.equipoVisitante.nombre} + ' (Visitante)'"></h3>
                <p>Indica los goles de cada jugador:</p>
                
                <div th:each="j : ${partido.equipoVisitante.jugadores}" style="margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 5px;">
                    <label th:text="${j.nombre} + ' (' + ${j.posicion} + ')'"
                           th:style="${j.posicion == 'Portero' ? 'color:gray; font-style:italic;' : 'font-weight:bold;'}">
                    </label>
                    <br>
                    Goles: <input type="number" 
                                  th:name="'golesVisitante[' + ${j.dni} + ']'" 
                                  min="0" value="0" 
                                  style="width: 60px;">
                </div>
            </div>
        </div>

        <br><hr><br>
        <p style="text-align: center; color: #666;">
            <em>* El resultado final se calculará sumando los goles introducidos.<br>
            * Los goles encajados se sumarán automáticamente a los Porteros.</em>
        </p>
        
        <button type="submit" style="width: 100%; padding: 15px; font-size: 1.2em; cursor: pointer;">
            Finalizar Partido y Calcular Puntos
        </button>
    </form>
    
    <br>
    <a href="/partidos">Volver sin guardar</a>
</body>
</html>